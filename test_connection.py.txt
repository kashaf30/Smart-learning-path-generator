from neo4j import GraphDatabase
from dotenv import load_dotenv
import os

# 🔒 Load environment variables
load_dotenv()

# 🔐 Get credentials from .env
URI = os.getenv("NEO4J_URI")
USER = os.getenv("NEO4J_USER")
PASSWORD = os.getenv("NEO4J_PASSWORD")

print("🔍 Testing Neo4j Connection...")
print(f"URI: {URI}")
print(f"User: {USER}")
print(f"Password: {PASSWORD[:5]}...")  # Only first 5 chars shown for safety

try:
    # Driver create karein
    driver = GraphDatabase.driver(URI, auth=(USER, PASSWORD))
    
    # Test connection
    with driver.session() as session:
        result = session.run("RETURN 'Connection Successful!' AS message")
        message = result.single()["message"]
        print(f"✅ SUCCESS: {message}")
    
    driver.close()
    
except Exception as e:
    print(f"❌ ERROR: {type(e).__name__}")
    print(f"❌ ERROR DETAILS: {str(e)}")
